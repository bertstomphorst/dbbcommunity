<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="view_res_partner_label">
        <t t-call="web.basic_layout">
            <t t-set="company_id" t-value="res_company" />
            <t t-set="counter" t-value="0"/>

            <t t-foreach="docs.with_context(show_address=True)" t-as="partner">
                <t t-set="counter" t-value="counter + 1"/>

                <div
                    t-attf-style="height: {{company_id.partner_labels_height}}mm;
                    width: {{company_id.partner_labels_width}}mm;
                    padding: {{company_id.partner_labels_padding}}mm;
                    margin-top: {{company_id.partner_labels_margin_top}}mm;
                    margin-bottom: {{company_id.partner_labels_margin_bottom}}mm;
                    margin-left: {{company_id.partner_labels_margin_left}}mm;
                    margin-right: {{company_id.partner_labels_margin_right}}mm;
                    display: inline-block;
                    overflow: hidden;
                    float:left;
                    page-break-inside: avoid;
                    page-break-after: #{counter == 16 and 'always' or 'avoid'};"
                >
                    <t t-if="partner.parent_id">
                        <t t-out="partner.parent_id.name"/><br/>
                        <span>T.a.v. </span>
                    </t>
                    <t t-out="partner.name"/><br/>
                    <t t-out="partner.street"/><br/>
                    <t t-if="partner.street2">
                        <t t-out="partner.street2"/><br/>
                    </t>
                    <t t-out="partner.zip"/><span> </span><span> </span><t t-out="partner.city"/><br/>
                    <t t-if="partner.country_id.code != 'NL'">
                        <t t-out="partner.country_id.name"/>
                    </t>
                </div>
            </t>
        </t>
    </template>
    <record id="report_res_partner_label" model="ir.actions.report">
        <field name="name">Partner Labels</field>
        <field name="model">res.partner</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">partner_label.view_res_partner_label</field>
        <field name="binding_model_id" ref="base.model_res_partner" />
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="base.paperformat_euro" />
    </record>
</odoo>
